<html>
  <head>
    <script>
function getFinalImageURLUsingIframe(imageURL) {
    return new Promise((resolve, reject) => {
        if (!document.body) {
            reject("Document body is not ready yet!");
            return;
        }

        let iframe = document.createElement('iframe');
        iframe.style.display = 'none'; // Hide the iframe
        document.body.appendChild(iframe); // Append iframe after DOM is ready

        iframe.onload = function () {
            try {
                resolve(iframe.contentWindow.location.href); // Get final redirected URL
            } catch (e) {
                reject("Failed to get final URL due to cross-origin policy");
            }
            document.body.removeChild(iframe); // Cleanup
        };

        iframe.src = imageURL;
    });
}

// Run after DOM is loaded
document.addEventListener("DOMContentLoaded", function() {
    getFinalImageURLUsingIframe('https://work.fife.usercontent.google.com/d/1K7FTJxeGfmi-W3tB0wVzq6_eblHKQjCmjDDWWGTOQ0c=w1469-h565-p-k-nu')
        .then(finalURL => console.log("Final Image URL:", finalURL))
        .catch(error => console.error(error));
});
    </script>
  </head>
  <body>
  </body>
</html>
